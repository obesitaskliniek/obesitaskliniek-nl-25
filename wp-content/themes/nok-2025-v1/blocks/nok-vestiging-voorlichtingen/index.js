(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.wp.blockEditor,o=window.wp.components,i=window.wp.data,l=window.wp.i18n,r=window.wp.serverSideRender;var s=e.n(r);const a=window.wp.element,d=window.ReactJSXRuntime,p=({value:e,onChange:t,palette:n})=>{const[i,l]=(0,a.useState)(!1),[r,s]=(0,a.useState)(""),p=(0,a.useRef)(null),c=(window.PagePartDesignSettings?.colorPalettes||{})[n]||[],g=c.filter(e=>e.label.toLowerCase().includes(r.toLowerCase())),x=c.find(t=>t.value===e),u=(e,t="24px")=>{const n=!e||"transparent"===e||"inherit"===e;return(0,d.jsx)("div",{style:{width:t,height:t,borderRadius:"4px",border:"1px solid #ccc",flexShrink:0,background:n?"repeating-linear-gradient(45deg, #fff, #fff 4px, #eee 4px, #eee 8px)":e,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}})};return(0,d.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,d.jsxs)("div",{style:{position:"relative"},children:[(0,d.jsx)("div",{ref:p,onClick:()=>l(!i),style:{border:"1px solid #ddd",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",background:"#fff",minHeight:"40px"},children:x?(0,d.jsxs)(d.Fragment,{children:[u(x.color),(0,d.jsx)("span",{style:{fontSize:"13px"},children:x.label})]}):e?(0,d.jsxs)(d.Fragment,{children:[u(null),(0,d.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:e})]}):(0,d.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:"Selecteer kleur..."})}),x&&(0,d.jsx)("button",{onClick:e=>{e.stopPropagation(),t("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"#d63638",color:"#fff",border:"none",borderRadius:"3px",padding:"4px 8px",fontSize:"11px",cursor:"pointer",fontWeight:"500"},title:"Wis selectie",children:"Ã—"})]}),i&&(0,d.jsx)(o.Popover,{anchor:p.current,onClose:()=>{l(!1),s("")},placement:"bottom-start",shift:!0,resize:!0,children:(0,d.jsxs)("div",{style:{background:"#fff",maxHeight:"400px",width:"280px",overflow:"hidden"},children:[(0,d.jsx)("input",{type:"text",placeholder:"Zoek kleur...",value:r,onChange:e=>s(e.target.value),style:{width:"100%",padding:"8px",border:"none",borderBottom:"1px solid #ddd",fontSize:"13px",outline:"none",boxSizing:"border-box"},autoFocus:!0}),(0,d.jsx)("div",{style:{overflowY:"auto",maxHeight:"350px",padding:"8px"},children:0===g.length?(0,d.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#757575",fontSize:"13px"},children:"Geen kleuren gevonden"}):(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:g.map(n=>(0,d.jsxs)("div",{onClick:()=>{t(n.value),l(!1),s("")},title:n.label,style:{padding:"4px",border:e===n.value?"2px solid #007cba":"1px solid #ddd",borderRadius:"4px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",background:e===n.value?"#e0f0ff":"#fff",transition:"all 0.15s",minHeight:"50px"},onMouseEnter:t=>{e!==n.value&&(t.currentTarget.style.background="#f5f5f5")},onMouseLeave:t=>{e!==n.value&&(t.currentTarget.style.background="#fff")},children:[u(n.color,"32px"),(0,d.jsx)("span",{style:{fontSize:"10px",textAlign:"center",lineHeight:"1.2",color:"#333",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.label})]},n.value||"empty"))})})]})})]})},c="nok-2025-v1",g="nok2025/nok-vestiging-voorlichtingen";(0,t.registerBlockType)(g,{edit:({attributes:e,setAttributes:t})=>{const{vestigingId:r,limit:a,title:x,showAllLink:u,backgroundColor:h,textColor:b}=e,v=(0,i.useSelect)(e=>e("core").getEntityRecords("postType","vestiging",{per_page:-1,status:"publish",orderby:"title",order:"asc"})||[],[]),f=[{label:(0,l.__)("Automatisch detecteren",c),value:0},...v.map(e=>({label:e.title.rendered,value:e.id}))],m=(0,n.useBlockProps)({className:"nok-vestiging-voorlichtingen-editor",style:{width:"100%",maxWidth:"100%",padding:"15px 3vw",boxSizing:"border-box"}});return(0,d.jsxs)("div",{...m,children:[(0,d.jsxs)(n.InspectorControls,{children:[(0,d.jsxs)(o.PanelBody,{title:(0,l.__)("Kleuren",c),children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:(0,l.__)("Achtergrondkleur",c)}),(0,d.jsx)(p,{value:h,onChange:e=>t({backgroundColor:e}),palette:"backgrounds"}),(0,d.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:(0,l.__)("Tekstkleur",c)}),(0,d.jsx)(p,{value:b,onChange:e=>t({textColor:e}),palette:"text"})]}),(0,d.jsxs)(o.PanelBody,{title:(0,l.__)("Instellingen",c),children:[(0,d.jsx)(o.SelectControl,{label:(0,l.__)("Vestiging",c),value:r,options:f,onChange:e=>t({vestigingId:Number(e)}),help:(0,l.__)("Kies een vestiging of laat automatisch detecteren.",c)}),(0,d.jsx)(o.RangeControl,{label:(0,l.__)("Aantal voorlichtingen",c),value:a,onChange:e=>t({limit:e}),min:1,max:12}),(0,d.jsx)(o.TextControl,{label:(0,l.__)("Titel",c),value:x,onChange:e=>t({title:e})}),(0,d.jsx)(o.ToggleControl,{label:(0,l.__)('Toon "Bekijk alle" link',c),checked:u,onChange:e=>t({showAllLink:e})})]})]}),0===r&&(0,d.jsx)(o.Notice,{status:"info",isDismissible:!1,style:{margin:"0 0 12px"},children:(0,l.__)("Op vestiging-pagina's worden automatisch voorlichtingen voor die vestiging getoond. Op andere pagina's worden alle aankomende voorlichtingen getoond.",c)}),(0,d.jsx)(s(),{block:g,attributes:e,EmptyResponsePlaceholder:()=>(0,d.jsx)(o.Placeholder,{icon:"calendar-alt",label:(0,l.__)("Voorlichtingen",c),instructions:(0,l.__)("Er zijn geen aankomende voorlichtingen gevonden.",c)})})]})},save:()=>null})})();