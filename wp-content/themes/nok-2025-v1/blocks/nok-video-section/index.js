(()=>{"use strict";const e=window.wp.blocks,o=window.wp.blockEditor,t=window.wp.components,l=window.wp.i18n,i=window.ReactJSXRuntime,n=window.wp.primitives;var r=(0,i.jsx)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)(n.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})});const a=window.wp.element,s=({value:e,onChange:o,palette:l})=>{const[n,r]=(0,a.useState)(!1),[s,d]=(0,a.useState)(""),c=(0,a.useRef)(null),p=(window.PagePartDesignSettings?.colorPalettes||{})[l]||[],x=p.filter(e=>e.label.toLowerCase().includes(s.toLowerCase())),u=p.find(o=>o.value===e),h=(e,o="24px")=>{const t=!e||"transparent"===e||"inherit"===e;return(0,i.jsx)("div",{style:{width:o,height:o,borderRadius:"4px",border:"1px solid #ccc",flexShrink:0,background:t?"repeating-linear-gradient(45deg, #fff, #fff 4px, #eee 4px, #eee 8px)":e,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}})};return(0,i.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)("div",{ref:c,onClick:()=>r(!n),style:{border:"1px solid #ddd",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",background:"#fff",minHeight:"40px"},children:u?(0,i.jsxs)(i.Fragment,{children:[h(u.color),(0,i.jsx)("span",{style:{fontSize:"13px"},children:u.label})]}):e?(0,i.jsxs)(i.Fragment,{children:[h(null),(0,i.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:e})]}):(0,i.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:"Selecteer kleur..."})}),u&&(0,i.jsx)("button",{onClick:e=>{e.stopPropagation(),o("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"#d63638",color:"#fff",border:"none",borderRadius:"3px",padding:"4px 8px",fontSize:"11px",cursor:"pointer",fontWeight:"500"},title:"Wis selectie",children:"×"})]}),n&&(0,i.jsx)(t.Popover,{anchor:c.current,onClose:()=>{r(!1),d("")},placement:"bottom-start",shift:!0,resize:!0,children:(0,i.jsxs)("div",{style:{background:"#fff",maxHeight:"400px",width:"280px",overflow:"hidden"},children:[(0,i.jsx)("input",{type:"text",placeholder:"Zoek kleur...",value:s,onChange:e=>d(e.target.value),style:{width:"100%",padding:"8px",border:"none",borderBottom:"1px solid #ddd",fontSize:"13px",outline:"none",boxSizing:"border-box"},autoFocus:!0}),(0,i.jsx)("div",{style:{overflowY:"auto",maxHeight:"350px",padding:"8px"},children:0===x.length?(0,i.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#757575",fontSize:"13px"},children:"Geen kleuren gevonden"}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:x.map(t=>(0,i.jsxs)("div",{onClick:()=>{o(t.value),r(!1),d("")},title:t.label,style:{padding:"4px",border:e===t.value?"2px solid #007cba":"1px solid #ddd",borderRadius:"4px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",background:e===t.value?"#e0f0ff":"#fff",transition:"all 0.15s",minHeight:"50px"},onMouseEnter:o=>{e!==t.value&&(o.currentTarget.style.background="#f5f5f5")},onMouseLeave:o=>{e!==t.value&&(o.currentTarget.style.background="#fff")},children:[h(t.color,"32px"),(0,i.jsx)("span",{style:{fontSize:"10px",textAlign:"center",lineHeight:"1.2",color:"#333",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.label})]},t.value||"empty"))})})]})})]})},d="nok-2025-v1",c=[{label:(0,l.__)("Automatisch",d),value:"visibility"},{label:(0,l.__)("Klik om af te spelen",d),value:"click"},{label:(0,l.__)("Klik om fullscreen af te spelen",d),value:"off"}];(0,e.registerBlockType)("nok2025/nok-video-section",{edit:({attributes:e,setAttributes:n})=>{const{videoUrl:a,videoType:p,videoHq:x,videoPoster:u,videoStart:h,autoplay:g,fullSection:v,backgroundColor:b,textColor:f,narrowSection:m,sectionTitle:_,sectionDescription:w}=e,y=(0,o.useBlockProps)({className:"nok-video-section-editor",style:{width:"100%",maxWidth:"100%",padding:"15px 3vw",boxSizing:"border-box"}}),j=(window.PagePartDesignSettings?.colorPalettes||{})["backgrounds-simple"]||[],k=j.find(e=>e.value===b)?.label||b||(0,l.__)("Transparant",d);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.InspectorControls,{children:[(0,i.jsxs)(t.PanelBody,{title:(0,l.__)("Video Instellingen",d),initialOpen:!0,children:[(0,i.jsx)(t.SelectControl,{label:(0,l.__)("Video Type",d),value:p,options:[{label:"YouTube",value:"youtube"},{label:"Vimeo",value:"vimeo"},{label:(0,l.__)("Zelf-gehost",d),value:"self"}],onChange:e=>n({videoType:e})}),(0,i.jsx)(t.TextControl,{label:(0,l.__)("Video URL",d),value:a,onChange:e=>n({videoUrl:e}),placeholder:"youtube"===p?"https://www.youtube.com/watch?v=...":"vimeo"===p?"https://vimeo.com/...":"https://..."}),"self"===p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.TextControl,{label:(0,l.__)("Video HQ URL (optioneel)",d),value:x,onChange:e=>n({videoHq:e}),help:(0,l.__)("Hogere kwaliteit video voor fullscreen weergave",d)}),(0,i.jsx)(t.TextControl,{label:(0,l.__)("Poster afbeelding URL (optioneel)",d),value:u,onChange:e=>n({videoPoster:e}),help:(0,l.__)("Afbeelding die wordt getoond voordat de video start",d)}),(0,i.jsx)(t.TextControl,{label:(0,l.__)("Starttijd in seconden (optioneel)",d),value:h,onChange:e=>n({videoStart:e}),placeholder:"0",help:(0,l.__)("Bijv. 2.5 voor start op 2,5 seconden",d)}),(0,i.jsx)(t.SelectControl,{label:(0,l.__)("Autoplay gedrag",d),value:g,options:c,onChange:e=>n({autoplay:e}),help:(0,l.__)("Automatisch: speelt af wanneer zichtbaar. Klik: toont overlay, speelt 1x af bij klik. Uit: alleen poster.",d)})]})]}),(0,i.jsxs)(t.PanelBody,{title:(0,l.__)("Sectie Instellingen",d),initialOpen:!0,children:[(0,i.jsx)(t.ToggleControl,{label:(0,l.__)("Volledige sectie",d),help:(0,l.__)("Bedek de hele sectie tot max 90% van de viewport hoogte",d),checked:v,onChange:e=>n({fullSection:e})}),(0,i.jsx)("label",{style:{display:"block",fontSize:"11px",fontWeight:"500",textTransform:"uppercase",marginBottom:"4px"},children:(0,l.__)("Achtergrondkleur",d)}),(0,i.jsx)(s,{value:b,palette:"backgrounds-simple",onChange:e=>n({backgroundColor:e})}),!v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.TextControl,{label:(0,l.__)("Sectie titel",d),value:_,onChange:e=>n({sectionTitle:e}),help:(0,l.__)("Optioneel: wordt als h2 boven de video getoond",d),placeholder:(0,l.__)("Geen titel",d)}),(0,i.jsx)(t.TextareaControl,{label:(0,l.__)("Beschrijving",d),value:w,onChange:e=>n({sectionDescription:e}),help:(0,l.__)("Optioneel: wordt als paragraaf onder de titel getoond",d),rows:3}),(0,i.jsx)("label",{style:{display:"block",fontSize:"11px",fontWeight:"500",textTransform:"uppercase",marginBottom:"4px"},children:(0,l.__)("Tekstkleur",d)}),(0,i.jsx)(s,{value:f,palette:"text-extended",onChange:e=>n({textColor:e})}),(0,i.jsx)(t.ToggleControl,{label:(0,l.__)("Smalle sectie",d),help:(0,l.__)("Maakt de sectie smaller (max-width beperkt)",d),checked:m,onChange:e=>n({narrowSection:e})})]})]})]}),(0,i.jsxs)("div",{...y,children:[(0,i.jsxs)("div",{className:"nok-video-section-editor__header",style:{padding:"12px 20px",background:"#f0f0f1",border:"1px solid #c3c4c7",borderBottom:"none",borderRadius:"4px 4px 0 0",textAlign:"center"},children:[(0,i.jsx)("strong",{children:(0,l.__)("NOK Video Sectie",d)}),(0,i.jsxs)("div",{style:{fontSize:"12px",marginTop:"4px",color:"#666"},children:[v?(0,l.__)("Volledige sectie",d):(0,l.__)("Inline video",d)," | ",(0,l.__)("Achtergrond:",d)," ",k]})]}),(0,i.jsx)("div",{style:{padding:"20px",background:"#fff",border:"1px solid #c3c4c7",borderRadius:"0 0 4px 4px"},children:(()=>{if(!a)return(0,i.jsx)(t.Placeholder,{icon:(0,i.jsx)(o.BlockIcon,{icon:r}),label:(0,l.__)("NOK Video Sectie",d),instructions:(0,l.__)("Voer een video URL in",d),className:"nok-video-section__placeholder",children:(0,i.jsxs)("div",{style:{width:"100%",maxWidth:"400px"},children:[(0,i.jsx)(t.SelectControl,{label:(0,l.__)("Video Type",d),value:p,options:[{label:"YouTube",value:"youtube"},{label:"Vimeo",value:"vimeo"},{label:(0,l.__)("Zelf-gehost",d),value:"self"}],onChange:e=>n({videoType:e})}),(0,i.jsx)(t.TextControl,{label:(0,l.__)("Video URL",d),value:a,onChange:e=>n({videoUrl:e}),placeholder:"youtube"===p?"https://www.youtube.com/watch?v=...":"vimeo"===p?"https://vimeo.com/...":"https://..."})]})});let e="";if("youtube"===p){const o=a.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\s]+)/);o?e=`https://www.youtube.com/embed/${o[1]}`:/^[a-zA-Z0-9_-]{11}$/.test(a)&&(e=`https://www.youtube.com/embed/${a}`)}else if("vimeo"===p){const o=a.match(/vimeo\.com\/(\d+)/);o&&(e=`https://player.vimeo.com/video/${o[1]}`)}else if("self"===p)return(0,i.jsx)("video",{controls:!0,src:a,poster:u||void 0,preload:"metadata",style:{width:"100%",maxHeight:"400px",objectFit:"contain"}});return e?(0,i.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0},children:(0,i.jsx)("iframe",{src:e,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}):(0,i.jsx)("p",{children:(0,l.__)("Video kon niet worden geladen",d)})})()})]})]})},save:()=>null})})();