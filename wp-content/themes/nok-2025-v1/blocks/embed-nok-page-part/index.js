(()=>{"use strict";const e=window.wp.blocks,t=window.wp.components,n=window.wp.data,o=window.wp.i18n,s=window.wp.element,l=window.ReactJSXRuntime,i="nok-2025-v1";(0,e.registerBlockType)("nok2025/embed-nok-page-part",{edit:({attributes:e,setAttributes:r})=>{const{postId:a}=e,d=(0,n.useSelect)(e=>e("core").getEntityRecords("postType","page_part",{per_page:-1}),[])||[],c=a?`/wp-json/nok-2025-v1/v1/embed-page-part/${a}`:"",p=(0,s.useRef)(null),[u,w]=(0,s.useState)(400);return(0,s.useEffect)(()=>{const e=p.current;if(!e)return;let t;const n=()=>{try{const t=e.contentDocument||e.contentWindow.document,n=Math.max(t.documentElement.scrollHeight,t.body.scrollHeight);w(n)}catch(e){}},o=()=>{n(),t=new MutationObserver(n),t.observe(e.contentDocument.body,{childList:!0,subtree:!0,attributes:!0})};return e.addEventListener("load",o),()=>{e.removeEventListener("load",o),t&&t.disconnect()}},[a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.PanelBody,{title:(0,o.__)("Settings",i),initialOpen:!0,children:(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Welk blok?",i),value:a,options:[{label:(0,o.__)("Selecteer een blok…",i),value:0},...d.map(e=>({label:e.title.rendered,value:e.id}))],onChange:e=>r({postId:parseInt(e,10)})})}),a?(0,l.jsx)("div",{style:{position:"relative",width:"100%"},children:(0,l.jsx)("iframe",{ref:p,title:(0,o.__)("Embedded NOK Page Part",i),src:c,style:{width:"100%",height:`${u}px`,border:0},sandbox:"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"})}):(0,l.jsx)("p",{children:(0,o.__)("Selecteer een blok om te bekijken…",i)})]})},save:()=>null})})();