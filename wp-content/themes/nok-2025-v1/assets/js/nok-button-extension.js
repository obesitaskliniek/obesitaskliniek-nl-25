(()=>{"use strict";const e=window.wp.hooks,n=window.wp.compose,t=window.wp.element,o=window.wp.blockEditor,r=window.wp.components,i=window.wp.i18n,l=window.ReactJSXRuntime,s=({value:e,onChange:n,icons:o})=>{const[i,s]=(0,t.useState)(!1),[a,d]=(0,t.useState)(""),c=(0,t.useRef)(null),p=Object.entries(o).flatMap(e=>Object.entries(e[1]).map(n=>({name:n[0],svg:n[1],category:e[0]}))),x=p.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())),u=p.find(n=>n.name===e);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("style",{children:"\n        svg.nok-icon {\n            width: 100%;\n            height: 100%;\n            display: block;\n        }\n    "}),(0,l.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,l.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"8px"},children:"Icon"}),(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("div",{ref:c,onClick:()=>s(!i),style:{border:"1px solid #ddd",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",background:"#fff",minHeight:"40px"},children:u?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{width:"24px",height:"24px",flexShrink:0},dangerouslySetInnerHTML:{__html:u.svg}}),(0,l.jsx)("span",{style:{fontSize:"13px"},children:u.name})]}):(0,l.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:"Select an icon..."})}),u&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),n("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"#d63638",color:"#fff",border:"none",borderRadius:"3px",padding:"4px 8px",fontSize:"11px",cursor:"pointer",fontWeight:"500"},title:"Clear icon",children:"×"})]}),i&&(0,l.jsx)(r.Popover,{anchor:c.current,onClose:()=>{s(!1),d("")},placement:"bottom-start",shift:!0,resize:!0,children:(0,l.jsxs)("div",{style:{background:"#fff",maxHeight:"400px",width:"280px",overflow:"hidden"},children:[(0,l.jsx)("input",{type:"text",placeholder:"Search icons...",value:a,onChange:e=>d(e.target.value),style:{width:"100%",padding:"8px",border:"none",borderBottom:"1px solid #ddd",fontSize:"13px",outline:"none",boxSizing:"border-box"},autoFocus:!0}),(0,l.jsx)("div",{style:{overflowY:"auto",maxHeight:"350px",padding:"8px"},children:0===x.length?(0,l.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#757575",fontSize:"13px"},children:"No icons found"}):(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:x.map(t=>(0,l.jsx)("div",{onClick:()=>{n(t.name),s(!1),d("")},title:t.name,style:{padding:"2px",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:e===t.name?"#e0f0ff":"#fff",transition:"all 0.15s",aspectRatio:"1"},onMouseEnter:n=>{e!==t.name&&(n.currentTarget.style.background="#f5f5f5")},onMouseLeave:n=>{e!==t.name&&(n.currentTarget.style.background="#fff")},children:(0,l.jsx)("div",{style:{width:"3em",height:"3em"},dangerouslySetInnerHTML:{__html:t.svg}})},t.name))})})]})})]})]})},a=({value:e,onChange:n,palette:o})=>{const[i,s]=(0,t.useState)(!1),[a,d]=(0,t.useState)(""),c=(0,t.useRef)(null),p=(window.PagePartDesignSettings?.colorPalettes||{})[o]||[],x=p.filter(e=>e.label.toLowerCase().includes(a.toLowerCase())),u=p.find(n=>n.value===e),g=(e,n="24px")=>{const t=!e||"transparent"===e||"inherit"===e;return(0,l.jsx)("div",{style:{width:n,height:n,borderRadius:"4px",border:"1px solid #ccc",flexShrink:0,background:t?"repeating-linear-gradient(45deg, #fff, #fff 4px, #eee 4px, #eee 8px)":e,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}})};return(0,l.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("div",{ref:c,onClick:()=>s(!i),style:{border:"1px solid #ddd",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",background:"#fff",minHeight:"40px"},children:u?(0,l.jsxs)(l.Fragment,{children:[g(u.color),(0,l.jsx)("span",{style:{fontSize:"13px"},children:u.label})]}):e?(0,l.jsxs)(l.Fragment,{children:[g(null),(0,l.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:e})]}):(0,l.jsx)("span",{style:{fontSize:"13px",color:"#757575"},children:"Selecteer kleur..."})}),u&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),n("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"#d63638",color:"#fff",border:"none",borderRadius:"3px",padding:"4px 8px",fontSize:"11px",cursor:"pointer",fontWeight:"500"},title:"Wis selectie",children:"×"})]}),i&&(0,l.jsx)(r.Popover,{anchor:c.current,onClose:()=>{s(!1),d("")},placement:"bottom-start",shift:!0,resize:!0,children:(0,l.jsxs)("div",{style:{background:"#fff",maxHeight:"400px",width:"280px",overflow:"hidden"},children:[(0,l.jsx)("input",{type:"text",placeholder:"Zoek kleur...",value:a,onChange:e=>d(e.target.value),style:{width:"100%",padding:"8px",border:"none",borderBottom:"1px solid #ddd",fontSize:"13px",outline:"none",boxSizing:"border-box"},autoFocus:!0}),(0,l.jsx)("div",{style:{overflowY:"auto",maxHeight:"350px",padding:"8px"},children:0===x.length?(0,l.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#757575",fontSize:"13px"},children:"Geen kleuren gevonden"}):(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:x.map(t=>(0,l.jsxs)("div",{onClick:()=>{n(t.value),s(!1),d("")},title:t.label,style:{padding:"4px",border:e===t.value?"2px solid #007cba":"1px solid #ddd",borderRadius:"4px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",background:e===t.value?"#e0f0ff":"#fff",transition:"all 0.15s",minHeight:"50px"},onMouseEnter:n=>{e!==t.value&&(n.currentTarget.style.background="#f5f5f5")},onMouseLeave:n=>{e!==t.value&&(n.currentTarget.style.background="#fff")},children:[g(t.color,"32px"),(0,l.jsx)("span",{style:{fontSize:"10px",textAlign:"center",lineHeight:"1.2",color:"#333",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.label})]},t.value||"empty"))})})]})})]})};(0,e.addFilter)("blocks.registerBlockType","nok2025/button-attributes",function(e,n){return"core/button"!==n?e:{...e,attributes:{...e.attributes,nokIcon:{type:"string",default:""},nokStyle:{type:"string",default:""},nokBgColor:{type:"string",default:"nok-bg-darkblue nok-text-contrast"},nokTextColor:{type:"string",default:""},nokIconColor:{type:"string",default:""},nokIconPosition:{type:"string",default:"after"},fillMobile:{type:"boolean",default:!1}}}});const d=(0,n.createHigherOrderComponent)(e=>n=>{const{name:d,attributes:c,setAttributes:p}=n;if("core/button"!==d)return(0,l.jsx)(e,{...n});const{nokIcon:x="",nokBgColor:u="",nokTextColor:g="",nokIconColor:f="",nokIconPosition:b="after",fillMobile:h=!1}=c,k=window.nokButtonIcons&&window.nokButtonIcons.ui||{};return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(e,{...n}),(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(r.PanelBody,{title:(0,i.__)("NOK Button Instellingen","nok2025"),initialOpen:!0,children:[(0,l.jsx)(s,{value:x,onChange:e=>p({nokIcon:e}),icons:{ui:k}}),x&&(0,l.jsx)(r.SelectControl,{label:(0,i.__)("Icoon positie","nok2025"),value:b,options:[{label:"Voor tekst",value:"before"},{label:"Na tekst",value:"after"}],onChange:e=>p({nokIconPosition:e})}),(0,l.jsx)("label",{className:"components-base-control__label",style:{display:"block",marginBottom:"4px"},children:(0,i.__)("Knop kleur","nok2025")}),(0,l.jsx)(a,{value:u,onChange:e=>p({nokBgColor:e}),palette:"button-backgrounds"}),(0,l.jsx)("label",{className:"components-base-control__label",style:{display:"block",marginBottom:"4px"},children:(0,i.__)("Tekst kleur (optioneel)","nok2025")}),(0,l.jsx)(a,{value:g,onChange:e=>p({nokTextColor:e}),palette:"text"}),x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{className:"components-base-control__label",style:{display:"block",marginBottom:"4px"},children:(0,i.__)("Icoon kleur","nok2025")}),(0,l.jsx)(a,{value:f,onChange:e=>p({nokIconColor:e}),palette:"icon-colors"})]}),(0,l.jsx)(r.ToggleControl,{label:(0,i.__)("Volledige breedte op mobiel","nok2025"),checked:h,onChange:e=>p({fillMobile:e}),help:(0,i.__)("Knop vult de volledige breedte op mobiele apparaten","nok2025")})]})})]})},"withButtonControls");(0,e.addFilter)("editor.BlockEdit","nok2025/button-controls",d);const c=(0,n.createHigherOrderComponent)(e=>n=>{const{name:t,attributes:o}=n;if("core/button"!==t)return(0,l.jsx)(e,{...n});const{nokBgColor:r="",nokTextColor:i="",nokStyle:s="darkblue",fillMobile:a=!1}=o,d=["nok-button"];r?d.push(r):d.push(`nok-bg-${s}`,"nok-text-contrast"),i&&d.push(i),a&&d.push("fill-mobile");const c=d.join(" ");return(0,l.jsx)(e,{...n,className:c?`${n.className||""} ${c}`.trim():n.className})},"applyButtonClassesEditor");(0,e.addFilter)("editor.BlockListBlock","nok2025/button-classes-editor",c);const p=(0,n.createHigherOrderComponent)(e=>n=>{const{name:t,attributes:o}=n;if("core/button"!==t)return(0,l.jsx)(e,{...n});const{nokIcon:r="",nokIconColor:i="",nokIconPosition:s="after"}=o,a=(0,l.jsx)(e,{...n});if(!r)return a;const d=(window.nokButtonIcons&&window.nokButtonIcons.ui||{})[r];if(!d)return a;let c="currentColor";return i&&(c=`var(--nok-${i.startsWith("nok-text-")?i.replace("nok-text-",""):i})`),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("style",{children:`\n                    [data-block="${n.clientId}"] .wp-block-button__link::${"before"===s?"before":"after"} {\n                        content: '';\n                        display: inline-block;\n                        width: 1em;\n                        height: 1em;\n                        margin: ${"before"===s?"0 0.5em 0 0":"0 0 0 0.5em"};\n                        background: ${c};\n                        mask-image: url('data:image/svg+xml;utf8,${encodeURIComponent(d)}');\n                        mask-size: contain;\n                        mask-repeat: no-repeat;\n                        mask-position: center;\n                        -webkit-mask-image: url('data:image/svg+xml;utf8,${encodeURIComponent(d)}');\n                        -webkit-mask-size: contain;\n                        -webkit-mask-repeat: no-repeat;\n                        -webkit-mask-position: center;\n                    }\n                `}),a]})},"withButtonIconPreview");(0,e.addFilter)("editor.BlockListBlock","nok2025/button-icon-preview",p,20)})();