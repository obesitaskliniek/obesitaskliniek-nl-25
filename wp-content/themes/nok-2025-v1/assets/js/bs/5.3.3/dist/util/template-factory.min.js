/*
 Bootstrap template-factory.js v5.3.3 (https://getbootstrap.com/)
 Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
 Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
*/
(function(c,d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d(require("../dom/selector-engine.js"),require("./config.js"),require("./sanitizer.js"),require("./index.js")):"function"===typeof define&&define.amd?define(["../dom/selector-engine","./config","./sanitizer","./index"],d):(c="undefined"!==typeof globalThis?globalThis:c||self,c.TemplateFactory=d(c.SelectorEngine,c.Config,c.Sanitizer,c.Index))})(this,function(c,d,g,f){const h={allowList:g.DefaultAllowlist,content:{},
extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},k={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},l={entry:"(string|element|function|null)",selector:"(string|element)"};class m extends d{constructor(a){super();this._config=this._getConfig(a)}static get Default(){return h}static get DefaultType(){return k}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(a=>
this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return 0<this.getContent().length}changeContent(a){this._checkContent(a);this._config.content={...this._config.content,...a};return this}toHtml(){var a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(const [e,n]of Object.entries(this._config.content))this._setContent(a,n,e);a=a.children[0];const b=this._resolvePossibleFunction(this._config.extraClass);b&&a.classList.add(...b.split(" "));return a}_typeCheckConfig(a){super._typeCheckConfig(a);
this._checkContent(a.content)}_checkContent(a){for(const [b,e]of Object.entries(a))super._typeCheckConfig({selector:b,entry:e},l)}_setContent(a,b,e){if(a=c.findOne(e,a))(b=this._resolvePossibleFunction(b))?f.isElement(b)?this._putElementInTemplate(f.getElement(b),a):this._config.html?a.innerHTML=this._maybeSanitize(b):a.textContent=b:a.remove()}_maybeSanitize(a){return this._config.sanitize?g.sanitizeHtml(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return f.execute(a,
[this])}_putElementInTemplate(a,b){this._config.html?(b.innerHTML="",b.append(a)):b.textContent=a.textContent}}return m});
