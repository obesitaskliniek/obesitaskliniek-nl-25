(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,o=window.wp.element,n=window.wp.blockEditor,r=window.wp.components,a=window.wp.i18n,l=window.ReactJSXRuntime,i=window.nokImageLayouts?.variants||[{name:"default",label:"Default",icon:"format-image"}];(0,e.addFilter)("blocks.registerBlockType","nok2025/image-layout-attribute",function(e,t){return"core/image"!==t?e:{...e,attributes:{...e.attributes,customLayout:{type:"string",default:"default"},enableBlurBackground:{type:"boolean",default:!1}}}});const s=(0,t.createHigherOrderComponent)(e=>t=>{const{name:s,attributes:c,setAttributes:u}=t;if("core/image"!==s)return(0,l.jsx)(e,{...t});const{customLayout:d="default",enableBlurBackground:m=!1}=c,g=i.find(e=>e.name===d)||i[0];return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(n.BlockControls,{group:"block",children:(0,l.jsx)(r.ToolbarGroup,{children:(0,l.jsx)(r.DropdownMenu,{icon:g.icon,label:(0,a.__)("Image Layout","nok2025"),children:({onClose:e})=>(0,l.jsx)(r.MenuGroup,{children:i.map(t=>(0,l.jsx)(r.MenuItem,{icon:t.icon,isSelected:d===t.name,onClick:()=>{u({customLayout:t.name}),e()},children:t.label},t.name))})})})}),(0,l.jsx)(n.InspectorControls,{group:"settings",children:(0,l.jsx)(r.PanelBody,{title:(0,a.__)("Afbeelding instellingen","nok2025"),children:(0,l.jsx)(r.ToggleControl,{label:(0,a.__)("Centreren en uitvullen met vervaagde afbeelding","nok2025"),checked:m,onChange:e=>u({enableBlurBackground:e}),help:(0,a.__)("Voegt een vervaagde achtergrond toe zodat de afbeelding uitvult zonder bij te snijden. Heeft effect op verticale (portret) afbeeldingen die in brede kaders moeten.","nok2025")})})}),(0,l.jsx)(e,{...t})]})},"withLayoutControls");(0,e.addFilter)("editor.BlockEdit","nok2025/image-layout-controls",s);const c=(0,t.createHigherOrderComponent)(e=>t=>{const{name:o,attributes:n}=t;if("core/image"!==o)return(0,l.jsx)(e,{...t});const{customLayout:r="default",enableBlurBackground:a=!1}=n;let i=[];"default"!==r&&i.push(`nok-image-${r}`),a&&i.push("nok-image-cover-blur");const s=i.join(" ");return(0,l.jsx)(e,{...t,className:s?`${t.className||""} ${s}`.trim():t.className})},"applyLayoutClassEditor");(0,e.addFilter)("editor.BlockListBlock","nok2025/image-layout-class-editor",c);const u=(0,t.createHigherOrderComponent)(e=>t=>{const{name:o,attributes:n}=t;if("core/image"!==o||!n.enableBlurBackground)return(0,l.jsx)(e,{...t});const r=n.url;return(0,l.jsx)("div",{style:{"--blur-bg-image":r?`url(${r})`:"none"},children:(0,l.jsx)(e,{...t})})},"withEditorBlurStyle");(0,e.addFilter)("editor.BlockListBlock","nok2025/image-blur-editor-style",u,5),(0,e.addFilter)("blocks.getSaveContent.extraProps","nok2025/image-layout-class-frontend",function(e,t,o){if("core/image"!==t.name)return e;const{customLayout:n="default",enableBlurBackground:r=!1}=o;let a=[];if("default"!==n&&a.push(`nok-image-${n}`),r&&a.push("nok-image-cover-blur"),a.length>0){const t=a.join(" ");e.className=e.className?`${e.className} ${t}`:t}return e})})();