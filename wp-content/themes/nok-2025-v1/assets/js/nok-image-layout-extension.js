(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,o=window.wp.element,n=window.wp.blockEditor,a=window.wp.components,r=window.wp.i18n,l=window.ReactJSXRuntime,i=window.nokImageLayouts?.variants||[{name:"default",label:"Default",icon:"format-image"}];(0,e.addFilter)("blocks.registerBlockType","nok2025/image-layout-attribute",function(e,t){return"core/image"!==t?e:{...e,attributes:{...e.attributes,customLayout:{type:"string",default:"default"},enableBlurBackground:{type:"boolean",default:!1}}}});const s=(0,t.createHigherOrderComponent)(e=>t=>{const{name:s,attributes:u,setAttributes:c}=t;if("core/image"!==s)return(0,l.jsx)(e,{...t});const{customLayout:d="default",enableBlurBackground:m=!1}=u,g=i.find(e=>e.name===d)||i[0];return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(n.BlockControls,{group:"block",children:(0,l.jsxs)(a.ToolbarGroup,{children:[(0,l.jsx)(a.DropdownMenu,{icon:g.icon,label:(0,r.__)("Image Layout","nok2025"),children:({onClose:e})=>(0,l.jsx)(a.MenuGroup,{children:i.map(t=>(0,l.jsx)(a.MenuItem,{icon:t.icon,isSelected:d===t.name,onClick:()=>{c({customLayout:t.name}),e()},children:t.label},t.name))})}),(0,l.jsx)(a.ToolbarButton,{icon:"image-filter",label:(0,r.__)("Centreren en uitvullen met vervaagde afbeelding","nok2025"),isPressed:m,onClick:()=>c({enableBlurBackground:!m})})]})}),(0,l.jsx)(e,{...t})]})},"withLayoutControls");(0,e.addFilter)("editor.BlockEdit","nok2025/image-layout-controls",s);const u=(0,t.createHigherOrderComponent)(e=>t=>{const{name:o,attributes:n}=t;if("core/image"!==o)return(0,l.jsx)(e,{...t});const{customLayout:a="default",enableBlurBackground:r=!1}=n;let i=[];"default"!==a&&i.push(`nok-image-${a}`),r&&i.push("nok-image-cover-blur");const s=i.join(" ");return(0,l.jsx)(e,{...t,className:s?`${t.className||""} ${s}`.trim():t.className})},"applyLayoutClassEditor");(0,e.addFilter)("editor.BlockListBlock","nok2025/image-layout-class-editor",u);const c=(0,t.createHigherOrderComponent)(e=>t=>{const{name:o,attributes:n}=t;if("core/image"!==o||!n.enableBlurBackground)return(0,l.jsx)(e,{...t});const a=n.url;return(0,l.jsx)("div",{style:{"--blur-bg-image":a?`url(${a})`:"none"},children:(0,l.jsx)(e,{...t})})},"withEditorBlurStyle");(0,e.addFilter)("editor.BlockListBlock","nok2025/image-blur-editor-style",c,5),(0,e.addFilter)("blocks.getSaveContent.extraProps","nok2025/image-layout-class-frontend",function(e,t,o){if("core/image"!==t.name)return e;const{customLayout:n="default",enableBlurBackground:a=!1}=o;let r=[];if("default"!==n&&r.push(`nok-image-${n}`),a&&r.push("nok-image-cover-blur"),r.length>0){const t=r.join(" ");e.className=e.className?`${e.className} ${t}`:t}return e})})();