(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};window.wp.editPost;const t=window.wp.domReady;var n=e.n(t);const o=window.wp.element,r=window.wp.data,i=(window.wp.components,{threshold:100,execStart:!1,execWhile:!1,execDone:!0}),d="nok-page-part-preview";function c(){const e=(0,o.useRef)(null),[t,n]=(0,o.useState)(400);return(0,o.useEffect)(()=>{const t=e.current;if(!t)return;const o=()=>{t.srcdoc||(()=>{try{const e=t.contentDocument||t.contentWindow.document,o=Math.min(e.documentElement.scrollHeight,e.body.scrollHeight);n(o)}catch(e){}})()};return t.addEventListener("load",o),()=>{t.removeEventListener("load",o)}},[]),(0,o.createElement)("iframe",{ref:e,id:`${d}-iframe`,srcdoc:"\n      <div style=\"\n        display:flex;\n        align-items:center;\n        justify-content:center;\n        height: 90vh;\n        color:#777;\n        font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;\n      \">\n        Klik “Refresh Preview” om de preview te laden.\n      </div>\n    ",style:{width:"100%",height:`${t}px`,border:"none"}})}n()(()=>{const e=document.getElementById(`${d}-root`);e&&(0,o.render)((0,o.createElement)(c),e);const t=document.getElementById(`${d}-button`),n=document.getElementById(`${d}-iframe`);if(!n)return void console.error("Failed to load iframe");t||console.warn("Update button not found, continuing with frame only");const s=()=>{wp.data.dispatch("core/editor").autosave().then(()=>{const e=wp.data.select("core/editor").getEditedPostPreviewLink();n.removeAttribute("srcdoc"),n.src=`${e}&hide_adminbar=1`})};t&&t.addEventListener("click",s),window.addEventListener("resize",function(e,t={}){let n={timer:0,whileTimer:0,busy:!1,...i,...t};return function(...t){clearTimeout(n.timer),!n.busy&&n.execStart&&(t[0].debounceType="start",e.apply(this,t),n.busy=!0),n.execWhile&&!n.whileTimer&&(n.whileTimer=setTimeout(()=>{t[0].debounceType="while",e.apply(this,t),n.whileTimer=!1},n.threshold)),n.timer=setTimeout(()=>{t[0].debounceType="done",n.busy=!1,n.execDone&&e.apply(this,t),clearInterval(n.whileTimer)},n.threshold)}}(e=>{s()}));let a=(0,r.select)("core/editor").getEditedPostAttribute("meta")?.design_slug;(0,r.subscribe)(()=>{const e=((0,r.select)("core/editor").getEditedPostAttribute("meta")||{}).design_slug;e!==a&&(a=e,s())})})})();